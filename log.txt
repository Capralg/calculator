============================= test session starts ==============================
platform darwin -- Python 3.8.8, pytest-6.2.4, py-1.10.0, pluggy-0.13.1 -- /Users/sunshine/Dev/hw_python_oop/venv/bin/python3
rootdir: /Users/sunshine/Dev/hw_python_oop, configfile: pytest.ini, testpaths: tests/
collecting ... collected 20 items

tests/test_homework.py::TestRecord::test_init[kwargs0] PASSED            [  5%]
tests/test_homework.py::TestRecord::test_init[kwargs1] PASSED            [ 10%]
tests/test_homework.py::TestCalculator::test_init PASSED                 [ 15%]
tests/test_homework.py::TestCalculator::test_add_record PASSED           [ 20%]
tests/test_homework.py::TestCalculator::test_get_today_stats PASSED      [ 25%]
tests/test_homework.py::TestCalculator::test_get_week_stats PASSED       [ 30%]
tests/test_homework.py::TestCalculator::test_get_calories_remained PASSED [ 35%]
tests/test_homework.py::TestCalculator::test_get_today_cash_remained PASSED [ 40%]
tests/test_homework.py::TestCaloriesCalculator::test_init PASSED         [ 45%]
tests/test_homework.py::TestCaloriesCalculator::test_get_calories_remained PASSED [ 50%]
tests/test_homework.py::TestCashCalculator::test_init PASSED             [ 55%]
tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[0-usd] PASSED [ 60%]
tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[0-eur] PASSED [ 65%]
tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[0-rub] PASSED [ 70%]
tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[1-usd] FAILED [ 75%]
tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[1-eur] FAILED [ 80%]
tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[1-rub] PASSED [ 85%]
tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[-1-usd] FAILED [ 90%]
tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[-1-eur] FAILED [ 95%]
tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[-1-rub] PASSED [100%]

=================================== FAILURES ===================================
____________ TestCashCalculator.test_get_today_cash_remained[1-usd] ____________

self = <test_homework.TestCashCalculator object at 0x7f80f06326a0>
init_limit = 2500
data_records = ([<homework.Record object at 0x7f80f0632ca0>, <homework.Record object at 0x7f80f0610760>, <homework.Record object at 0...7f80f064bac0>, <homework.Record object at 0x7f80f0610d30>, <homework.Record object at 0x7f80f064b280>, ...], 750, 2250)
amount = 1, currency = 'usd'
today_cash_remained = <function today_cash_remained.<locals>._today_cash_remained at 0x7f80f064c310>
msg_err = <function msg_err.<locals>._msg_err at 0x7f80f064c430>
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f80f064bb50>

    @pytest.mark.parametrize("amount,currency", [
        (0, 'usd'), (0, 'eur'), (0, 'rub'),
        (1, 'usd'), (1, 'eur'), (1, 'rub'),
        (-1, 'usd'), (-1, 'eur'), (-1, 'rub')
    ])
    def test_get_today_cash_remained(self, init_limit, data_records, amount, currency, today_cash_remained, msg_err,
                                     monkeypatch):
        result = homework.CashCalculator(init_limit)
        assert hasattr(result, 'get_today_cash_remained'), (
            msg_err('add_method', 'get_today_cash_remained', 'CashCalculator')
        )
    
        records, today, week = data_records
        for record in records:
            result.add_record(record)
    
        result.EURO_RATE = 70
        monkeypatch.setattr(homework.CashCalculator, "EURO_RATE", 70)
        result.USD_RATE = 60
        monkeypatch.setattr(homework.CashCalculator, "USD_RATE", 60)
        result.limit = today + (amount * 300)
>       assert re.fullmatch(today_cash_remained(amount, currency), result.get_today_cash_remained(currency)), (
            msg_err('wrong_method', 'get_today_cash_remained', 'CashCalculator')
        )
E       AssertionError: Проверьте правильность работы метода `get_today_cash_remained()` у класса `CashCalculator`
E       assert None
E        +  where None = <function fullmatch at 0x7f80ee2e43a0>('На сегодня осталось 5(.0|.00|) USD', 'На сегодня осталось 4.29 USD')
E        +    where <function fullmatch at 0x7f80ee2e43a0> = re.fullmatch
E        +    and   'На сегодня осталось 5(.0|.00|) USD' = <function today_cash_remained.<locals>._today_cash_remained at 0x7f80f064c310>(1, 'usd')
E        +    and   'На сегодня осталось 4.29 USD' = <bound method CashCalculator.get_today_cash_remained of <homework.CashCalculator object at 0x7f80f064bc10>>('usd')
E        +      where <bound method CashCalculator.get_today_cash_remained of <homework.CashCalculator object at 0x7f80f064bc10>> = <homework.CashCalculator object at 0x7f80f064bc10>.get_today_cash_remained

tests/test_homework.py:206: AssertionError
____________ TestCashCalculator.test_get_today_cash_remained[1-eur] ____________

self = <test_homework.TestCashCalculator object at 0x7f80f0632c10>
init_limit = 2500
data_records = ([<homework.Record object at 0x7f80f0830100>, <homework.Record object at 0x7f80f0830520>, <homework.Record object at 0...f80f0830c40>, <homework.Record object at 0x7f80f08309a0>, <homework.Record object at 0x7f80f08306a0>, ...], 1500, 2400)
amount = 1, currency = 'eur'
today_cash_remained = <function today_cash_remained.<locals>._today_cash_remained at 0x7f80f067b790>
msg_err = <function msg_err.<locals>._msg_err at 0x7f80f067b820>
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f80f067f2b0>

    @pytest.mark.parametrize("amount,currency", [
        (0, 'usd'), (0, 'eur'), (0, 'rub'),
        (1, 'usd'), (1, 'eur'), (1, 'rub'),
        (-1, 'usd'), (-1, 'eur'), (-1, 'rub')
    ])
    def test_get_today_cash_remained(self, init_limit, data_records, amount, currency, today_cash_remained, msg_err,
                                     monkeypatch):
        result = homework.CashCalculator(init_limit)
        assert hasattr(result, 'get_today_cash_remained'), (
            msg_err('add_method', 'get_today_cash_remained', 'CashCalculator')
        )
    
        records, today, week = data_records
        for record in records:
            result.add_record(record)
    
        result.EURO_RATE = 70
        monkeypatch.setattr(homework.CashCalculator, "EURO_RATE", 70)
        result.USD_RATE = 60
        monkeypatch.setattr(homework.CashCalculator, "USD_RATE", 60)
        result.limit = today + (amount * 300)
>       assert re.fullmatch(today_cash_remained(amount, currency), result.get_today_cash_remained(currency)), (
            msg_err('wrong_method', 'get_today_cash_remained', 'CashCalculator')
        )
E       AssertionError: Проверьте правильность работы метода `get_today_cash_remained()` у класса `CashCalculator`
E       assert None
E        +  where None = <function fullmatch at 0x7f80ee2e43a0>('На сегодня осталось 4.29 Euro', 'На сегодня осталось 5.0 Euro')
E        +    where <function fullmatch at 0x7f80ee2e43a0> = re.fullmatch
E        +    and   'На сегодня осталось 4.29 Euro' = <function today_cash_remained.<locals>._today_cash_remained at 0x7f80f067b790>(1, 'eur')
E        +    and   'На сегодня осталось 5.0 Euro' = <bound method CashCalculator.get_today_cash_remained of <homework.CashCalculator object at 0x7f80f067f370>>('eur')
E        +      where <bound method CashCalculator.get_today_cash_remained of <homework.CashCalculator object at 0x7f80f067f370>> = <homework.CashCalculator object at 0x7f80f067f370>.get_today_cash_remained

tests/test_homework.py:206: AssertionError
___________ TestCashCalculator.test_get_today_cash_remained[-1-usd] ____________

self = <test_homework.TestCashCalculator object at 0x7f80f067fb80>
init_limit = 2500
data_records = ([<homework.Record object at 0x7f80f067fb20>, <homework.Record object at 0x7f80f067f7c0>, <homework.Record object at 0...f80f06829d0>, <homework.Record object at 0x7f80f067fa00>, <homework.Record object at 0x7f80f06820a0>, ...], 1200, 2250)
amount = -1, currency = 'usd'
today_cash_remained = <function today_cash_remained.<locals>._today_cash_remained at 0x7f80f067b8b0>
msg_err = <function msg_err.<locals>._msg_err at 0x7f80f067b940>
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f80f0682cd0>

    @pytest.mark.parametrize("amount,currency", [
        (0, 'usd'), (0, 'eur'), (0, 'rub'),
        (1, 'usd'), (1, 'eur'), (1, 'rub'),
        (-1, 'usd'), (-1, 'eur'), (-1, 'rub')
    ])
    def test_get_today_cash_remained(self, init_limit, data_records, amount, currency, today_cash_remained, msg_err,
                                     monkeypatch):
        result = homework.CashCalculator(init_limit)
        assert hasattr(result, 'get_today_cash_remained'), (
            msg_err('add_method', 'get_today_cash_remained', 'CashCalculator')
        )
    
        records, today, week = data_records
        for record in records:
            result.add_record(record)
    
        result.EURO_RATE = 70
        monkeypatch.setattr(homework.CashCalculator, "EURO_RATE", 70)
        result.USD_RATE = 60
        monkeypatch.setattr(homework.CashCalculator, "USD_RATE", 60)
        result.limit = today + (amount * 300)
>       assert re.fullmatch(today_cash_remained(amount, currency), result.get_today_cash_remained(currency)), (
            msg_err('wrong_method', 'get_today_cash_remained', 'CashCalculator')
        )
E       AssertionError: Проверьте правильность работы метода `get_today_cash_remained()` у класса `CashCalculator`
E       assert None
E        +  where None = <function fullmatch at 0x7f80ee2e43a0>('Денег нет, держись: твой долг - 5(.0|.00|) USD', 'Денег нет, держись: твой долг - 4.29 USD')
E        +    where <function fullmatch at 0x7f80ee2e43a0> = re.fullmatch
E        +    and   'Денег нет, держись: твой долг - 5(.0|.00|) USD' = <function today_cash_remained.<locals>._today_cash_remained at 0x7f80f067b8b0>(-1, 'usd')
E        +    and   'Денег нет, держись: твой долг - 4.29 USD' = <bound method CashCalculator.get_today_cash_remained of <homework.CashCalculator object at 0x7f80f0682d90>>('usd')
E        +      where <bound method CashCalculator.get_today_cash_remained of <homework.CashCalculator object at 0x7f80f0682d90>> = <homework.CashCalculator object at 0x7f80f0682d90>.get_today_cash_remained

tests/test_homework.py:206: AssertionError
___________ TestCashCalculator.test_get_today_cash_remained[-1-eur] ____________

self = <test_homework.TestCashCalculator object at 0x7f80f067f040>
init_limit = 2500
data_records = ([<homework.Record object at 0x7f80f0830a60>, <homework.Record object at 0x7f80f0830bb0>, <homework.Record object at 0...7f80f08305b0>, <homework.Record object at 0x7f80f0830370>, <homework.Record object at 0x7f80f0830460>, ...], 750, 1650)
amount = -1, currency = 'eur'
today_cash_remained = <function today_cash_remained.<locals>._today_cash_remained at 0x7f80f08073a0>
msg_err = <function msg_err.<locals>._msg_err at 0x7f80f0807430>
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f80f06320a0>

    @pytest.mark.parametrize("amount,currency", [
        (0, 'usd'), (0, 'eur'), (0, 'rub'),
        (1, 'usd'), (1, 'eur'), (1, 'rub'),
        (-1, 'usd'), (-1, 'eur'), (-1, 'rub')
    ])
    def test_get_today_cash_remained(self, init_limit, data_records, amount, currency, today_cash_remained, msg_err,
                                     monkeypatch):
        result = homework.CashCalculator(init_limit)
        assert hasattr(result, 'get_today_cash_remained'), (
            msg_err('add_method', 'get_today_cash_remained', 'CashCalculator')
        )
    
        records, today, week = data_records
        for record in records:
            result.add_record(record)
    
        result.EURO_RATE = 70
        monkeypatch.setattr(homework.CashCalculator, "EURO_RATE", 70)
        result.USD_RATE = 60
        monkeypatch.setattr(homework.CashCalculator, "USD_RATE", 60)
        result.limit = today + (amount * 300)
>       assert re.fullmatch(today_cash_remained(amount, currency), result.get_today_cash_remained(currency)), (
            msg_err('wrong_method', 'get_today_cash_remained', 'CashCalculator')
        )
E       AssertionError: Проверьте правильность работы метода `get_today_cash_remained()` у класса `CashCalculator`
E       assert None
E        +  where None = <function fullmatch at 0x7f80ee2e43a0>('Денег нет, держись: твой долг - 4.29 Euro', 'Денег нет, держись: твой долг - 5.0 Euro')
E        +    where <function fullmatch at 0x7f80ee2e43a0> = re.fullmatch
E        +    and   'Денег нет, держись: твой долг - 4.29 Euro' = <function today_cash_remained.<locals>._today_cash_remained at 0x7f80f08073a0>(-1, 'eur')
E        +    and   'Денег нет, держись: твой долг - 5.0 Euro' = <bound method CashCalculator.get_today_cash_remained of <homework.CashCalculator object at 0x7f80f0632580>>('eur')
E        +      where <bound method CashCalculator.get_today_cash_remained of <homework.CashCalculator object at 0x7f80f0632580>> = <homework.CashCalculator object at 0x7f80f0632580>.get_today_cash_remained

tests/test_homework.py:206: AssertionError
=========================== short test summary info ============================
FAILED tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[1-usd]
FAILED tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[1-eur]
FAILED tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[-1-usd]
FAILED tests/test_homework.py::TestCashCalculator::test_get_today_cash_remained[-1-eur]
========================= 4 failed, 16 passed in 0.11s =========================
